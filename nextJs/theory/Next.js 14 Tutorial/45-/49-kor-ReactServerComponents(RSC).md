### React의 발전

- CSR => SSR => Suspense for SSR
- Suspense for SSR은 매끄러운 렌더링 경험에 더 가까워졌습니다.

**문제점**

- 번들 사이즈 증가로 사용자에게 과도한 다운로드가 발생합니다.
- 불필요한 hydration으로 인해 상호작용이 지연됩니다.
- 광범위한 클라이언트 측 처리로 인해 성능이 저하될 수 있습니다.

### React Server Components (RSC)

- React Server Components (RSC)는 React 팀이 설계한 새로운 아키텍처를 나타냅니다.
- 이 접근 방식은 서버와 클라이언트 환경의 장점을 활용하여 효율성, 로드 시간 및 상호작용성을 최적화하는 것을 목표로 합니다.
- 아키텍처는 두 가지 컴포넌트 모델을 소개합니다.
  - 클라이언트 컴포넌트
  - 서버 컴포넌트
- 이 구분은 컴포넌트의 기능이 아니라, 컴포넌트가 실행되는 위치와 상호작용할 특정 환경을 기반으로 합니다.

### 클라이언트 컴포넌트

- 클라이언트 컴포넌트는 우리가 익숙한 React 컴포넌트입니다.
- 이들은 일반적으로 클라이언트 측에서 렌더링되지만, 서버에서 HTML로 렌더링할 수도 있어 사용자가 빈 화면 대신 페이지의 HTML 콘텐츠를 즉시 볼 수 있습니다.
- 클라이언트 측에서 주로 실행되지만 서버에서 한 번 실행될 수 있는 컴포넌트로, 최적화 전략으로 사용됩니다.
- 클라이언트 컴포넌트는 브라우저와 같은 클라이언트 환경에 접근할 수 있으며, 상태, 효과, 이벤트 리스너를 사용하여 상호작용을 처리하고, 지리 위치나 로컬 저장소와 같은 브라우저 전용 API에 접근하여 특정 사용 사례에 맞는 UI를 구축할 수 있습니다.
- 사실 "클라이언트 컴포넌트"라는 용어는 새로운 것을 의미하지 않으며, 단지 새로 도입된 서버 컴포넌트와 구별하기 위해 사용됩니다.

### 서버 컴포넌트

- 서버 컴포넌트는 서버에서만 작동하도록 설계된 새로운 유형의 React 컴포넌트입니다.
- 클라이언트 컴포넌트와 달리, 서버 컴포넌트의 코드는 클라이언트로 다운로드되지 않고 서버에만 유지됩니다.
- 이 설계 선택은 React 애플리케이션에 여러 가지 이점을 제공합니다.

### 서버 컴포넌트의 이점

**1. 번들 사이즈 감소**

- 서버 컴포넌트는 클라이언트에 코드를 전송하지 않으며, 큰 종속성이 서버 측에 남아 있습니다.
- 이는 느린 인터넷 연결이나 성능이 낮은 장치를 가진 사용자에게 이점을 제공하며, 이들이 JavaScript를 다운로드, 파싱, 실행할 필요가 없습니다.
- 또한 hydration 단계를 제거하여 앱 로드와 상호작용 속도를 높입니다.

**2. 서버 측 자원에 직접 접근**

- 서버 측 자원(데이터베이스 또는 파일 시스템 등)에 직접 접근함으로써 서버 컴포넌트는 효율적인 데이터 가져오기 및 렌더링을 가능하게 하며, 추가적인 클라이언트 측 처리 없이도 동작합니다.
- 서버의 계산 능력과 데이터 소스에 대한 근접성을 활용하여, 컴퓨팅 집약적인 렌더링 작업을 관리하고 클라이언트로 상호작용하는 코드만 전송합니다.

**3. 향상된 보안**

- 서버 컴포넌트의 전용 서버 측 실행은 클라이언트 측에서 민감한 데이터와 로직(토큰 및 API 키 등)을 보호하여 보안을 강화합니다.

**4. 개선된 데이터 가져오기**

- 서버 컴포넌트는 데이터 가져오기 효율성을 개선합니다.
- 클라이언트 측에서 useEffect를 사용하여 데이터를 가져올 때, 자식 컴포넌트는 부모 컴포넌트가 자신의 데이터를 로드한 후에야 데이터를 로드할 수 있습니다.
- 이 순차적인 데이터 가져오기는 성능 저하를 초래합니다.
- 주요 문제는 클라이언트와 서버 간의 왕복 문제이며, 서버 측에서 이 순차적인 왕복을 처리할 수 있도록 합니다.
- 서버 측으로 이 로직을 이동시키면 요청이 줄어들고 전반적인 성능이 향상되며 클라이언트-서버 "워터폴"이 제거됩니다.

**5. 캐싱**

- 서버에서 렌더링하면 결과를 캐싱할 수 있으며, 이를 후속 요청 및 다양한 사용자에 걸쳐 재사용할 수 있습니다.
- 이 접근 방식은 성능을 크게 향상시키고 각 요청에 필요한 렌더링 및 데이터 가져오기 작업을 최소화하여 비용을 절감할 수 있습니다.

**6. 초기 페이지 로드 및 첫 콘텐츠 유효화**

- 서버 컴포넌트를 사용하면 초기 페이지 로드 및 첫 콘텐츠 유효화(FCP)가 크게 개선됩니다.
- 서버에서 HTML을 생성함으로써, 페이지가 즉시 사용자에게 표시되며, JavaScript 다운로드, 파싱 및 실행 지연이 제거됩니다.

**7. 향상된 SEO**

- 검색 엔진 최적화(SEO) 측면에서, 서버 렌더링된 HTML은 검색 엔진 봇이 완전히 접근할 수 있어 페이지의 인덱스 가능성이 향상됩니다.

**8. 효율적인 스트리밍**

- 서버 컴포넌트는 렌더링 프로세스를 관리 가능한 청크로 나눌 수 있으며, 이러한 청크는 준비되는 대로 클라이언트로 스트리밍됩니다.
- 이 접근 방식은 사용자가 페이지의 일부를 더 빨리 볼 수 있게 하며, 전체 페이지가 서버에서 렌더링될 때까지 기다릴 필요가 없습니다.

### RSC 계속

- 서버 컴포넌트는 데이터 가져오기 및 정적 렌더링을 담당하며, 클라이언트 컴포넌트는 애플리케이션의 상호작용 요소 렌더링을 담당합니다.
- 요약하자면, RSC 아키텍처는 React 애플리케이션이 서버와 클라이언트 렌더링의 최상의 측면을 활용하도록 하며, 모든 작업은 단일 언어, 단일 프레임워크, 통합된 API 세트를 사용합니다.

### RSC 핵심 요약

- RSC는 React 앱을 구축하는 새로운 방법을 소개하며, 컴포넌트를 두 가지 유형으로 구분합니다: 서버 컴포넌트와 클라이언트 컴포넌트
- 서버 컴포넌트는 서버에서만 실행되며, 데이터를 액세스하고 콘텐츠를 준비하지만 브라우저로 전송되지 않아 사용자에게 더 빠른 애플리케이션을 제공합니다.
- 서버 컴포넌트는 클릭이나 상호작용을 직접 처리할 수 없습니다.
- 반면, 클라이언트 컴포넌트는 사용자의 브라우저에서 작동하며 앱의 상호작용 부분(클릭 및 타이핑 등)을 처리합니다.
- 클라이언트 컴포넌트는 서버에서 렌더링될 수도 있어 사이트의 초기 로드를 빠르게 할 수 있습니다. 이 설정은 웹사이트를 더 빠르고, 안전하며, 모든 사람이 어디서나 어떤 장치를 사용하든지 쉽게 사용할 수 있도록 도와줍니다.

### RSC와 Next.js

- "React 렌더링의 발전에 대한 깊이 있는 이해는 좋지만, Next.js의 렌더링 이해에 어떻게 도움이 되나요? 연결점은 무엇인가요?"
- Next.js의 App Router는 RSC 아키텍처를 기반으로 구축되어 있습니다.
- 우리가 논의한 모든 기능과 이점이 최신 버전의 Next.js에 이미 포함되어 있습니다.
- React 렌더링의 발전을 이해함으로써, 이제 Next.js의 나머지 섹션에 대한 배경 지식을 갖추게 되었으며, 이 섹션에서는 Next.js에 초점을 맞추겠습니다.
